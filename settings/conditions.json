# Condition definations
# Condition formula "enabledIf" is checked in each recalculation for each condition defination listed here.
# Available variables and current values of them you can see from the dashboard.
#
# Some variables you can use in "enabledIf" formulas:
#	hhmm - current time, hours and minutes, used in time limiting conditions, e.g. night hours: (hhmm < '0700' or hhmm >'2200')
#	mmdd - current date, months and days, used in calendar based conditions, e.g June, July, August: ('0601' <= mmdd  and  mmdd < '0901')
#   purchasedEnergyPeriodNet - purchased energy in current period (now hour), e.g. own production exceeding purchase if: (purchasedEnergyPeriodNet<0) 
#   solar24h - solar forecast (in kWh) for coming 24 h period (also for 6, 12 and 18 hours), e.g. formula for sunny day:  (solar24h>5) 
#   energyPriceSpot - current spot price (c/kWh), e.g condition for very cheap price: (energyPriceSpot<1.0)
#   spotPriceRank24h - rank of current spot price within 24 hours window (also for 6, 12 and 18 hours), e.g. 4 most expensive spot prices in 24h window: (spotPriceRank24h>20), e.g. cheapest hour within coming 6 hours: (spotPriceRank6h==1)
#       
# 24 h spot price window from current hour to 24 h in the future. If there is not yet that much price data available in the future, window starts from the past to newest hour, so that that window is 24 h is long
# For example if current hour is 13 and utmost future hour is 00 next day, the 24 h price window is: 01 (today) -> 00 (tomorrow),
#  but if full day-ahead price data for tomorrow is available,the 24 h price window is  13 (today, current hour) -> 12 (tomorrow)
#  
{
	"cheapest24h": {
		"desc": "Cheapest spot price in 24 h window",
		"enabledIf": "spotPriceRank24h==1"
	},
	"netsales": {
		"desc": "More production than consumption, nettoperiodi",
		"enabledIf": "purchasedEnergyPeriodNet<0"
	},
	"sunnydaycoming": {
		"desc": "sunny day coming (do not overheat the boilers)",
		"enabledIf": "solar12h>5 and hhmm > '0400' and hhmm <'0700'"
	},
	"darkdaycoming": {
		"desc": "dark day coming (heat the boilers, there will be no cheap energy today)",
		"enabledIf": "solar12h<5 and hhmm > '0400' and hhmm <'0700'"
	},
	"morning": {
		"desc": "varaajat levossa, aurinkosähköä odotellessa ainakin kesällä",
		"enabledIf": "hhmm > '0700' and hhmm <'1000'"
	},
	"evening": {
		"desc": "varaajat levossa, yösähköä odotellessa",
		"enabledIf": "hhmm > '1830' and hhmm <'2205'"
	},
	"night": { 
		"desc": "yöhinnoittelu",
		"enabledIf": "hhmm < '0700' or hhmm >'2200'"
	},
	"summernight": {
		"desc": "kesäyö kalenterin mukaan",
		"enabledIf": "(hhmm < '0700' or hhmm >'2200') and (mmdd > '0214' and mmdd < '1016')"
	},
	"winternight": {
		"desc": "talviyö kalenterin mukaan",
		"enabledIf": "(hhmm < '0700' or hhmm >'2200') and (mmdd < '0215' or mmdd > '1015')"
	},
	"day": {
		"desc": "päivähinnoittelu",
		"enabledIf": "hhmm >= '0700' and hhmm <'2200'"
	},
	"default": {
		"desc": "Matches always",
		"enabledIf": "hhmm >= '0000' and hhmm <='2359'"
	},
	"spothigh": {
		"desc": "Spot price is high",
		"enabledIf": "energyPriceSpot>15"
	},
	"spotlow": {
		"desc": "Spot price is low and one of 6 cheapest hour",
		"enabledIf": "energyPriceSpot<4.0 and spotPriceRank24h<=6"
	},
	"spotpeak12h": {
		"desc": "4 most expensive spot prices in 12h window",
		"enabledIf": "spotPriceRank12h>8"
	},
	"cheapest24h": {
		"desc": "Cheapest spot price in 24 h window",
		"enabledIf": "spotPriceRank24h==1"
	}

}